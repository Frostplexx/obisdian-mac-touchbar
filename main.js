/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __commonJS = (cb, mod) => function __require() {
  return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
};
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/macro_desc.json
var require_macro_desc = __commonJS({
  "src/macro_desc.json"(exports, module2) {
    module2.exports = {
      macros: [
        {
          syntax: "[KEYCODE]",
          description: "This is how you press a key, where `KEYCODE` is the name of the key you want pressed. Keycodes can be found <a >here</a>.",
          example: "[Enter] [Backspace]"
        },
        {
          syntax: "[KEYCODE]+[KEYCODE]",
          description: "+ is used to add a modifier eg: [Cmd]+[P] for pressing Command-P. Multiple modifiers are supported if you separate them with a space.",
          example: "[Cmd]+[P] [Cmd Shift]+[F]"
        },
        {
          syntax: ",DELAY,",
          description: ", is used to add a delay between key presses where `DELAY` is the amount in ms.",
          example: "[Cmd]+[P],100,[Enter]"
        },
        {
          syntax: '"TEXT"',
          description: '" is used to type text where `TEXT` is the text you want typed',
          example: '"Hello World"'
        },
        {
          syntax: "#COMMENT#",
          description: "# is used to add a comment where `COMMENT` is the comment you want to add.",
          example: "#This is a comment#"
        },
        {
          syntax: "\\CHAR",
          description: "\\ is used to escape a character where `CHAR` is the character you want to escape.",
          example: "\\["
        },
        {
          syntax: "{REPEAT}()",
          description: "{}() is used to repeat a sequence of keys where `REPEAT` is the sequence you want to repeat.",
          example: "{10}([Cmd]+[P] [Cmd]+[A] [Cmd]+[C] [Cmd]+[V] [Enter])"
        }
      ]
    };
  }
});

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => TouchBarMacros
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");

// src/touchbarItems/touchBarItems.ts
var ObsidianTouchBarItem = class {
  constructor(properties, id = "") {
    this.properties = properties;
    this.id = id === "" ? this.generateID() : id;
  }
  generateID() {
    return Math.random().toString(36).substring(7);
  }
  /**
   * Returns the properties of the touch bar item
   * @returns {any}
   */
  getProperties() {
    return this.properties;
  }
};

// src/macro.ts
var electron = require("electron").remote;
function executeMacro(app, makro) {
  const commands = parseMacro(makro);
  executeCommands(app, commands);
}
var repeatcounter = 0;
async function executeCommands(app, commands) {
  var _a, _b, _c;
  console.log(commands);
  for (const command of commands) {
    if (command.command === MacroCommandType.RepeatStart) {
      repeatcounter = parseInt(command.argument);
    }
    if (repeatcounter > 0) {
      for (let i = 0; i < repeatcounter - 1; i++) {
        const insideCommands = commands.slice(commands.indexOf(command) + 1, commands.indexOf(commands.find((command2) => command2.command === MacroCommandType.RepeatEnd)));
        executeCommands(app, insideCommands);
      }
    }
    if (command.command === MacroCommandType.PressKey && ((_a = commands[commands.indexOf(command) + 1]) == null ? void 0 : _a.command) === MacroCommandType.PressKeys && ((_b = commands[commands.indexOf(command) + 2]) == null ? void 0 : _b.command) === MacroCommandType.PressKey) {
      pressKeys(app, command.argument, (_c = commands[commands.indexOf(command) + 2]) == null ? void 0 : _c.argument);
    } else {
      switch (command.command) {
        case MacroCommandType.PressKey:
          pressKey(app, command.argument);
          break;
        case MacroCommandType.AddText:
          addText(app, command.argument);
          break;
        case MacroCommandType.Delay:
          await waitFor(command.argument);
          break;
        case MacroCommandType.AddComment:
          break;
      }
    }
  }
}
function waitFor(argument) {
  return new Promise((resolve) => setTimeout(resolve, parseInt(argument)));
}
function addText(app, text) {
  console.log(text);
  const characters = text.split("");
  const win = electron.BrowserWindow.getFocusedWindow();
  characters.forEach((char) => {
    win.webContents.sendInputEvent({ keyCode: char, type: "char" });
  });
}
function pressKeys(app, key1, key2) {
  const win = electron.BrowserWindow.getFocusedWindow();
  const mods = key1.split(" ");
  win.webContents.sendInputEvent({ keyCode: key2, type: "keyDown", modifiers: mods });
  win.webContents.sendInputEvent({ keyCode: key2, type: "keyUp" });
}
function pressKey(app, key) {
  console.log(key);
  const browserWindow = electron.BrowserWindow.getFocusedWindow();
  browserWindow.webContents.sendInputEvent({ keyCode: key, type: "keyDown" });
  browserWindow.webContents.sendInputEvent({ keyCode: key, type: "keyUp" });
}
function parseMacro(macro) {
  const characters = macro.split("");
  const parsedCommands = [];
  let currentCommand = "";
  let currentArgument = "";
  let isEscaped = false;
  let commandStarted = false;
  let commandEscaped = false;
  characters.forEach((command) => {
    switch (command) {
      case "[":
        if (isEscaped || commandEscaped) {
          currentArgument += command;
          isEscaped = false;
          break;
        } else {
          commandStarted = true;
          currentCommand += command;
          break;
        }
      case "]":
        if (isEscaped || commandEscaped) {
          currentArgument += command;
          isEscaped = false;
          break;
        } else if (commandStarted) {
          commandStarted = false;
          currentCommand += command;
          parsedCommands.push({
            command: MacroCommandType.PressKey,
            argument: currentArgument
          });
          currentArgument = "";
          break;
        } else {
          currentArgument += command;
          break;
        }
      case "+":
        if (isEscaped || commandEscaped) {
          currentArgument += command;
          isEscaped = false;
          break;
        } else {
          commandStarted = false;
          currentCommand += command;
          parsedCommands.push({
            command: MacroCommandType.PressKeys,
            argument: ""
          });
          currentArgument = "";
          break;
        }
      case '"':
        if (isEscaped) {
          currentArgument += command;
          isEscaped = false;
          break;
        } else {
          commandEscaped = true;
          commandStarted = !commandStarted;
          currentCommand += command;
          if (!commandStarted) {
            parsedCommands.push({
              command: MacroCommandType.AddText,
              argument: currentArgument
            });
            commandEscaped = false;
          }
          currentArgument = "";
          break;
        }
      case "#":
        if (isEscaped || commandEscaped) {
          currentArgument += command;
          isEscaped = false;
          break;
        } else {
          commandStarted = !commandStarted;
          currentCommand += command;
          if (!commandStarted) {
            parsedCommands.push({
              command: MacroCommandType.AddComment,
              argument: currentArgument
            });
          }
          currentArgument = "";
          break;
        }
      case "\\":
        isEscaped = true;
        break;
      case ",":
        if (isEscaped || commandEscaped) {
          currentArgument += command;
          isEscaped = false;
          break;
        } else {
          commandStarted = !commandStarted;
          currentCommand += command;
          if (!commandStarted) {
            parsedCommands.push({
              command: MacroCommandType.Delay,
              argument: currentArgument
            });
          }
          currentArgument = "";
          break;
        }
      case "{":
        if (isEscaped || commandEscaped) {
          currentArgument += command;
          isEscaped = false;
          break;
        } else {
          commandStarted = !commandStarted;
          currentCommand += command;
          break;
        }
      case "}":
        if (isEscaped || commandEscaped) {
          currentArgument += command;
          isEscaped = false;
          break;
        } else {
          commandStarted = false;
          currentCommand += command;
          if (!commandStarted) {
            parsedCommands.push({
              command: MacroCommandType.RepeatStart,
              argument: currentArgument
            });
          }
          currentArgument = "";
          break;
        }
      case "(":
        if (isEscaped || commandEscaped) {
          currentArgument += command;
          isEscaped = false;
          break;
        } else {
          currentCommand += command;
          break;
        }
      case ")":
        if (isEscaped || commandEscaped) {
          currentArgument += command;
          isEscaped = false;
          break;
        } else {
          currentCommand += command;
          if (!commandStarted) {
            parsedCommands.push({
              command: MacroCommandType.RepeatEnd,
              argument: ""
            });
          }
          break;
        }
      default:
        if (commandStarted) {
          currentArgument += command;
        }
        break;
    }
  });
  return parsedCommands;
}
var MacroCommandType = /* @__PURE__ */ ((MacroCommandType2) => {
  MacroCommandType2[MacroCommandType2["PressKey"] = 0] = "PressKey";
  MacroCommandType2[MacroCommandType2["PressKeys"] = 1] = "PressKeys";
  MacroCommandType2[MacroCommandType2["AddText"] = 2] = "AddText";
  MacroCommandType2[MacroCommandType2["AddComment"] = 3] = "AddComment";
  MacroCommandType2[MacroCommandType2["RepeatStart"] = 4] = "RepeatStart";
  MacroCommandType2[MacroCommandType2["RepeatEnd"] = 5] = "RepeatEnd";
  MacroCommandType2[MacroCommandType2["Delay"] = 6] = "Delay";
  return MacroCommandType2;
})(MacroCommandType || {});

// src/touchbarItems/items/button.ts
var { TouchBar } = require("electron").remote;
var ObsidianTouchBarButton = class extends ObsidianTouchBarItem {
  constructor(properties) {
    super(properties);
    this.type = "ObsidianTouchBarButton" /* ObsidianTouchBarButton */;
  }
  getItemForElectron() {
    return new TouchBar.TouchBarButton({
      label: this.properties.label,
      backgroundColor: this.properties.backgroundColor,
      click: () => {
        executeMacro(this.app, this.properties.macro);
      }
    });
  }
  getItemForDisplay() {
    const itemEl = document.createElement("div");
    itemEl.classList.add("touchbar-item-list");
    const labelIn = itemEl.createEl("input", {
      type: "text",
      value: this.properties.label
    });
    labelIn.classList.add("touchbar-item-input");
    labelIn.placeholder = "Label";
    const colorIn = itemEl.createEl("input", {
      type: "color",
      value: this.properties.backgroundColor
    });
    colorIn.classList.add("touchbar-item-input");
    colorIn.placeholder = "Background Color";
    const makroIn = itemEl.createEl("input", {
      type: "text",
      value: this.properties.macro
    });
    makroIn.classList.add("touchbar-item-input");
    makroIn.classList.add("wide-input");
    makroIn.placeholder = "Macro";
    labelIn.onchange = async () => {
      this.properties.label = labelIn.value;
    };
    colorIn.onchange = async () => {
      this.properties.backgroundColor = colorIn.value;
    };
    makroIn.onchange = async () => {
      this.properties.macro = makroIn.value;
    };
    return itemEl;
  }
};

// src/touchbarItems/items/label.ts
var { TouchBar: TouchBar2 } = require("electron").remote;
var ObsidianTouchBarLabel = class extends ObsidianTouchBarItem {
  constructor(properties) {
    super(properties);
    this.type = "ObsidianTouchBarLabel" /* ObsidianTouchBarLabel */;
  }
  getItemForElectron() {
    return new TouchBar2.TouchBarLabel({
      label: this.properties.label
    });
  }
  getItemForDisplay() {
    const itemEl = document.createElement("div");
    itemEl.classList.add("touchbar-item-list");
    const labelIn = itemEl.createEl("input", {
      type: "text",
      value: this.properties.label
    });
    labelIn.classList.add("wide-input");
    labelIn.classList.add("touchbar-item-input");
    labelIn.placeholder = "Label";
    labelIn.onchange = async () => {
      this.properties.label = labelIn.value;
    };
    return itemEl;
  }
};

// src/touchbarItems/touchBarItems.utils.ts
function deserializeTouchBarItem(serializedItem) {
  switch (serializedItem.type) {
    case "ObsidianTouchBarButton" /* ObsidianTouchBarButton */:
      return new ObsidianTouchBarButton(serializedItem.properties);
    case "ObsidianTouchBarLabel" /* ObsidianTouchBarLabel */:
      return new ObsidianTouchBarLabel(serializedItem.properties);
    case "ObsidianTouchBarColorPicker" /* ObsidianTouchBarColorPicker */:
      throw new Error("Unknown touch bar item type: " + serializedItem.type);
    case "ObsidianTouchBarGroup" /* ObsidianTouchBarGroup */:
      throw new Error("Unknown touch bar item type: " + serializedItem.type);
    case "ObsidianTouchBarPopover" /* ObsidianTouchBarPopover */:
      throw new Error("Unknown touch bar item type: " + serializedItem.type);
    case "ObsidianTouchBarScrubber" /* ObsidianTouchBarScrubber */:
      throw new Error("Unknown touch bar item type: " + serializedItem.type);
    case "ObsidianTouchBarSegmentedControl" /* ObsidianTouchBarSegmentedControl */:
      throw new Error("Unknown touch bar item type: " + serializedItem.type);
    case "ObsidianTouchBarSlider" /* ObsidianTouchBarSlider */:
      throw new Error("Unknown touch bar item type: " + serializedItem.type);
    case "ObsidianTouchBarSpacer" /* ObsidianTouchBarSpacer */:
      throw new Error("Unknown touch bar item type: " + serializedItem.type);
    default:
      throw new Error("Unknown touch bar item type: " + serializedItem.type);
  }
}

// src/main.ts
var DEFAULT_SETTINGS = {
  touchbarItems: []
};
var TouchBarMacros = class extends import_obsidian.Plugin {
  async onload() {
    await this.loadSettings();
    this.updateTouchBar();
    this.addSettingTab(new TouchBarSettingTab(this.app, this));
  }
  updateTouchBar() {
    const { BrowserWindow, TouchBar: TouchBar3 } = require("electron").remote;
    const items = this.settings.touchbarItems.map((item) => {
      return deserializeTouchBarItem(item).getItemForElectron();
    });
    if (items.length === 0)
      return;
    const win = BrowserWindow.getFocusedWindow();
    win.setTouchBar(new TouchBar3({
      items
    }));
  }
  onunload() {
    const { BrowserWindow } = require("electron").remote;
    const win = BrowserWindow.getFocusedWindow();
    win.setTouchBar(null);
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
};
var TouchBarSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Touch Bar Items" });
    containerEl.createEl("p", { text: "To add an item to your Touch Bar, click the button below. You can then edit the item in the list below." });
    const modifyOrAddArray = async (item) => {
      const index = this.plugin.settings.touchbarItems.findIndex((element) => element.id === item.id);
      if (index === -1) {
        this.plugin.settings.touchbarItems.push(item);
      } else {
        this.plugin.settings.touchbarItems[index] = item;
      }
      this.plugin.updateTouchBar();
      await this.plugin.saveSettings();
    };
    const createTouchbarItem = (item) => {
      const itemEl = itemContainer.createDiv("touchbar-item");
      const moveButtons = itemEl.createDiv("move-buttons-div");
      const moveUp = moveButtons.createEl("button", "touchbar-item-button");
      (0, import_obsidian.setIcon)(moveUp, "chevron-up");
      const moveDown = moveButtons.createEl("button", "touchbar-item-button");
      (0, import_obsidian.setIcon)(moveDown, "chevron-down");
      moveUp.addEventListener("click", async () => {
        var _a;
        const index = this.plugin.settings.touchbarItems.findIndex((element) => element.id === item.id);
        if (index > 0) {
          this.plugin.settings.touchbarItems.splice(index - 1, 0, this.plugin.settings.touchbarItems.splice(index, 1)[0]);
          this.plugin.updateTouchBar();
          await this.plugin.saveSettings();
          (_a = itemEl.previousSibling) == null ? void 0 : _a.before(itemEl);
        }
      });
      moveDown.addEventListener("click", async () => {
        var _a;
        const index = this.plugin.settings.touchbarItems.findIndex((element) => element.id === item.id);
        if (index < this.plugin.settings.touchbarItems.length - 1) {
          this.plugin.settings.touchbarItems.splice(index + 1, 0, this.plugin.settings.touchbarItems.splice(index, 1)[0]);
          this.plugin.updateTouchBar();
          await this.plugin.saveSettings();
          (_a = itemEl.nextSibling) == null ? void 0 : _a.after(itemEl);
        }
      });
      const items = item.getItemForDisplay();
      itemEl.append(items);
      items.querySelectorAll("input").forEach((input) => {
        input.addEventListener("change", async () => {
          await modifyOrAddArray(item);
        });
      });
      const removeButton = itemEl.createEl("button", "touchbar-item-button remove-button");
      (0, import_obsidian.setIcon)(removeButton, "x");
      removeButton.onclick = async () => {
        this.plugin.settings.touchbarItems = this.plugin.settings.touchbarItems.filter((i) => i !== item);
        await this.plugin.saveSettings();
        this.plugin.updateTouchBar();
        itemEl.remove();
      };
    };
    new import_obsidian.Setting(containerEl).setName("Add Touch Bar item").setDesc('Click the "+" button to start creating a new Touch Bar item.').addButton((cb) => {
      cb.setButtonText("Add").onClick(async (event) => {
        const mousePos = { x: event.offsetX, y: event.offsetY };
        const dropdown = containerEl.createDiv("touchbar-dropdown");
        console.log(mousePos);
        dropdown.style.right = mousePos.x + "px";
        dropdown.style.top = mousePos.y + "px";
        dropdown.addEventListener("mouseleave", () => {
          dropdown.remove();
        });
        const button = (text, onClick) => {
          const button2 = dropdown.createEl("button", "touchbar-dropdown-button");
          button2.createEl("span", { text });
          button2.classList.add("touchbar-dropdown-button");
          button2.addEventListener("click", () => {
            onClick();
            dropdown.remove();
          });
        };
        button("Button", () => {
          console.log("button");
          createTouchbarItem(new ObsidianTouchBarButton({ label: "", macro: "" }));
        });
        button("Label", () => {
          createTouchbarItem(new ObsidianTouchBarLabel({ label: "" }));
        });
        button("Spacer", () => {
        });
        button("Slider", () => {
        });
        button("Segmented Control", () => {
        });
        button("Popover", () => {
        });
        button("Scrubber", () => {
        });
      }).setTooltip("Add a new touchbar item").setIcon("plus").setCta();
    });
    const itemContainer = containerEl.createEl("div");
    itemContainer.createEl("h2", { text: "Current Touch Bar Items" });
    const touchbarItems = this.plugin.settings.touchbarItems;
    console.log(touchbarItems);
    for (let i = 0; i < touchbarItems.length; i++) {
      createTouchbarItem(deserializeTouchBarItem(touchbarItems[i]));
    }
    containerEl.createEl("hr");
    containerEl.createEl("h2", { text: "Macros" });
    const description = containerEl.createEl("p", { text: "Use macros to give your Touch Bar items functionality, but be careful as these can have the ability to modify files in unintended ways! If you unsure please consider trying out the macro in a new vault first. " });
    description.classList.add("touchbar-settings-description");
    description.createEl("a", {
      text: "List of available keycodes",
      href: "https://www.electronjs.org/docs/latest/api/accelerator#available-key-codes"
    });
    const macroTable = containerEl.createEl("table", "touchbar-macro-table");
    const macroTableHead = macroTable.createEl("thead");
    const macroTableHeadRow = macroTableHead.createEl("tr");
    const macroTableHeadRowName = macroTableHeadRow.createEl("th");
    const macroTableHeadRowName2 = macroTableHeadRow.createEl("th");
    const macroTableHeadRowName3 = macroTableHeadRow.createEl("th");
    macroTableHeadRowName.setText("Syntax");
    macroTableHeadRowName2.setText("Description");
    macroTableHeadRowName3.setText("Example");
    const macroTableBody = macroTable.createEl("tbody");
    const { macros } = require_macro_desc();
    for (let i = 0; i < macros.length; i++) {
      const row = macroTableBody.createEl("tr");
      const name = row.createEl("td", "touchbar-macro-table-border");
      const desc = row.createEl("td", "touchbar-macro-table-border");
      const example = row.createEl("td", "touchbar-macro-table-border");
      name.setText(macros[i]["syntax"]);
      desc.setText(macros[i]["description"]);
      example.setText(macros[i]["example"]);
    }
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21hY3JvX2Rlc2MuanNvbiIsICJzcmMvbWFpbi50cyIsICJzcmMvdG91Y2hiYXJJdGVtcy90b3VjaEJhckl0ZW1zLnRzIiwgInNyYy9tYWNyby50cyIsICJzcmMvdG91Y2hiYXJJdGVtcy9pdGVtcy9idXR0b24udHMiLCAic3JjL3RvdWNoYmFySXRlbXMvaXRlbXMvbGFiZWwudHMiLCAic3JjL3RvdWNoYmFySXRlbXMvdG91Y2hCYXJJdGVtcy51dGlscy50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsie1xuXHRcIm1hY3Jvc1wiOiBbXG5cdFx0e1xuXHRcdFx0XCJzeW50YXhcIjogXCJbS0VZQ09ERV1cIixcblx0XHRcdFwiZGVzY3JpcHRpb25cIjogXCJUaGlzIGlzIGhvdyB5b3UgcHJlc3MgYSBrZXksIHdoZXJlIGBLRVlDT0RFYCBpcyB0aGUgbmFtZSBvZiB0aGUga2V5IHlvdSB3YW50IHByZXNzZWQuIEtleWNvZGVzIGNhbiBiZSBmb3VuZCA8YSA+aGVyZTwvYT4uXCIsXG5cdFx0XHRcImV4YW1wbGVcIjogXCJbRW50ZXJdIFtCYWNrc3BhY2VdXCJcblx0XHR9LFxuXHRcdHtcblx0XHRcdFwic3ludGF4XCI6IFwiW0tFWUNPREVdK1tLRVlDT0RFXVwiLFxuXHRcdFx0XCJkZXNjcmlwdGlvblwiOiBcIisgaXMgdXNlZCB0byBhZGQgYSBtb2RpZmllciBlZzogW0NtZF0rW1BdIGZvciBwcmVzc2luZyBDb21tYW5kLVAuIE11bHRpcGxlIG1vZGlmaWVycyBhcmUgc3VwcG9ydGVkIGlmIHlvdSBzZXBhcmF0ZSB0aGVtIHdpdGggYSBzcGFjZS5cIixcblx0XHRcdFwiZXhhbXBsZVwiOiBcIltDbWRdK1tQXSBbQ21kIFNoaWZ0XStbRl1cIlxuXHRcdH0sXG5cdFx0e1xuXHRcdFx0XCJzeW50YXhcIjogXCIsREVMQVksXCIsXG5cdFx0XHRcImRlc2NyaXB0aW9uXCI6IFwiLCBpcyB1c2VkIHRvIGFkZCBhIGRlbGF5IGJldHdlZW4ga2V5IHByZXNzZXMgd2hlcmUgYERFTEFZYCBpcyB0aGUgYW1vdW50IGluIG1zLlwiLFxuXHRcdFx0XCJleGFtcGxlXCI6IFwiW0NtZF0rW1BdLDEwMCxbRW50ZXJdXCJcblx0XHR9LFxuXHRcdHtcblx0XHRcdFwic3ludGF4XCI6IFwiXFxcIlRFWFRcXFwiXCIsXG5cdFx0XHRcImRlc2NyaXB0aW9uXCI6IFwiXFxcIiBpcyB1c2VkIHRvIHR5cGUgdGV4dCB3aGVyZSBgVEVYVGAgaXMgdGhlIHRleHQgeW91IHdhbnQgdHlwZWRcIixcblx0XHRcdFwiZXhhbXBsZVwiOiBcIlxcXCJIZWxsbyBXb3JsZFxcXCJcIlxuXHRcdH0sXG5cdFx0e1xuXHRcdFx0XCJzeW50YXhcIjogXCIjQ09NTUVOVCNcIixcblx0XHRcdFwiZGVzY3JpcHRpb25cIjogXCIjIGlzIHVzZWQgdG8gYWRkIGEgY29tbWVudCB3aGVyZSBgQ09NTUVOVGAgaXMgdGhlIGNvbW1lbnQgeW91IHdhbnQgdG8gYWRkLlwiLFxuXHRcdFx0XCJleGFtcGxlXCI6IFwiI1RoaXMgaXMgYSBjb21tZW50I1wiXG5cdFx0fSxcblx0XHR7XG5cdFx0XHRcInN5bnRheFwiOiBcIlxcXFxDSEFSXCIsXG5cdFx0XHRcImRlc2NyaXB0aW9uXCI6IFwiXFxcXCBpcyB1c2VkIHRvIGVzY2FwZSBhIGNoYXJhY3RlciB3aGVyZSBgQ0hBUmAgaXMgdGhlIGNoYXJhY3RlciB5b3Ugd2FudCB0byBlc2NhcGUuXCIsXG5cdFx0XHRcImV4YW1wbGVcIjogXCJcXFxcW1wiXG5cdFx0fSxcblx0XHR7XG5cdFx0XHRcInN5bnRheFwiOiBcIntSRVBFQVR9KClcIixcblx0XHRcdFwiZGVzY3JpcHRpb25cIjogXCJ7fSgpIGlzIHVzZWQgdG8gcmVwZWF0IGEgc2VxdWVuY2Ugb2Yga2V5cyB3aGVyZSBgUkVQRUFUYCBpcyB0aGUgc2VxdWVuY2UgeW91IHdhbnQgdG8gcmVwZWF0LlwiLFxuXHRcdFx0XCJleGFtcGxlXCI6IFwiezEwfShbQ21kXStbUF0gW0NtZF0rW0FdIFtDbWRdK1tDXSBbQ21kXStbVl0gW0VudGVyXSlcIlxuXHRcdH1cblx0XVxufVxuIiwgImltcG9ydCB7QXBwLCBQbHVnaW4sIFBsdWdpblNldHRpbmdUYWIsIHNldEljb24sIFNldHRpbmd9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7T2JzaWRpYW5Ub3VjaEJhckl0ZW0sIFNlcmlhbGl6ZWRUb3VjaEJhckl0ZW19IGZyb20gXCIuL3RvdWNoYmFySXRlbXMvdG91Y2hCYXJJdGVtc1wiO1xuaW1wb3J0IHtkZXNlcmlhbGl6ZVRvdWNoQmFySXRlbX0gZnJvbSBcIi4vdG91Y2hiYXJJdGVtcy90b3VjaEJhckl0ZW1zLnV0aWxzXCI7XG5pbXBvcnQge09ic2lkaWFuVG91Y2hCYXJCdXR0b24sIFRvdWNoQmFyQnV0dG9uUHJvcGVydGllc30gZnJvbSBcIi4vdG91Y2hiYXJJdGVtcy9pdGVtcy9idXR0b25cIjtcbmltcG9ydCB7T2JzaWRpYW5Ub3VjaEJhckxhYmVsLCBUb3VjaEJhckxhYmVsUHJvcGVydGllc30gZnJvbSBcIi4vdG91Y2hiYXJJdGVtcy9pdGVtcy9sYWJlbFwiO1xuXG5cbmludGVyZmFjZSBUb3VjaGJhclBsdWdpblNldHRpbmdzIHtcblx0dG91Y2hiYXJJdGVtczogU2VyaWFsaXplZFRvdWNoQmFySXRlbVtdXG59XG5cbmNvbnN0IERFRkFVTFRfU0VUVElOR1M6IFRvdWNoYmFyUGx1Z2luU2V0dGluZ3MgPSB7XG5cdHRvdWNoYmFySXRlbXM6IFtdLFxufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUb3VjaEJhck1hY3JvcyBleHRlbmRzIFBsdWdpbiB7XG5cdHNldHRpbmdzOiBUb3VjaGJhclBsdWdpblNldHRpbmdzO1xuXG5cdGFzeW5jIG9ubG9hZCgpIHtcblx0XHRhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xuXG5cdFx0dGhpcy51cGRhdGVUb3VjaEJhcigpO1xuXG5cdFx0Ly8gVGhpcyBhZGRzIGEgc2V0dGluZ3MgdGFiIHNvIHRoZSB1c2VyIGNhbiBjb25maWd1cmUgdmFyaW91cyBhc3BlY3RzIG9mIHRoZSBwbHVnaW5cblx0XHR0aGlzLmFkZFNldHRpbmdUYWIobmV3IFRvdWNoQmFyU2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xuXHR9XG5cblx0dXBkYXRlVG91Y2hCYXIoKSB7XG5cdFx0Y29uc3Qge0Jyb3dzZXJXaW5kb3csIFRvdWNoQmFyfSA9IHJlcXVpcmUoJ2VsZWN0cm9uJykucmVtb3RlXG5cblx0XHQvLyBsb2FkIGFsbCB0aGUgaXRlbXMgZnJvbSB0aGUgc2V0dGluZ3Ncblx0XHRjb25zdCBpdGVtcyA9IHRoaXMuc2V0dGluZ3MudG91Y2hiYXJJdGVtcy5tYXAoKGl0ZW0pID0+IHtcblx0XHRcdHJldHVybiBkZXNlcmlhbGl6ZVRvdWNoQmFySXRlbShpdGVtKS5nZXRJdGVtRm9yRWxlY3Ryb24oKVxuXG5cdFx0fSk7XG5cblx0XHRpZihpdGVtcy5sZW5ndGggPT09IDApIHJldHVybjsgLy9kb24ndCBkbyBhbnl0aGluZyBpZiB0aGVyZSBhcmUgbm8gaXRlbXNcblxuXHRcdC8vZ2V0IHRoZSBtYWluIHdpbmRvd1xuXHRcdGNvbnN0IHdpbiA9IEJyb3dzZXJXaW5kb3cuZ2V0Rm9jdXNlZFdpbmRvdygpXG5cdFx0Ly9zZXQgdGhlIHRvdWNoYmFyXG5cdFx0d2luLnNldFRvdWNoQmFyKG5ldyBUb3VjaEJhcih7XG5cdFx0XHRpdGVtczogaXRlbXNcblx0XHR9KSlcblx0fVxuXG5cdG9udW5sb2FkKCkge1xuXHRcdC8vdW5sb2FkIGFsbCB0aGUgdG91Y2hiYXIgaXRlbXNcblx0XHRjb25zdCB7QnJvd3NlcldpbmRvd30gPSByZXF1aXJlKCdlbGVjdHJvbicpLnJlbW90ZVxuXHRcdGNvbnN0IHdpbiA9IEJyb3dzZXJXaW5kb3cuZ2V0Rm9jdXNlZFdpbmRvdygpXG5cdFx0d2luLnNldFRvdWNoQmFyKG51bGwpXG5cblx0XHQvL3VubG9hZCBhbGwgdGhlIGxpc3RlbmVyc1xuXHR9XG5cblx0YXN5bmMgbG9hZFNldHRpbmdzKCkge1xuXHRcdHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBhd2FpdCB0aGlzLmxvYWREYXRhKCkpO1xuXHR9XG5cblx0YXN5bmMgc2F2ZVNldHRpbmdzKCkge1xuXHRcdGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XG5cdH1cbn1cblxuY2xhc3MgVG91Y2hCYXJTZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XG5cdHBsdWdpbjogVG91Y2hCYXJNYWNyb3M7XG5cblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogVG91Y2hCYXJNYWNyb3MpIHtcblx0XHRzdXBlcihhcHAsIHBsdWdpbik7XG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XG5cdH1cblxuXHRkaXNwbGF5KCk6IHZvaWQge1xuXHRcdGNvbnN0IHtjb250YWluZXJFbH0gPSB0aGlzO1xuXG5cdFx0Y29udGFpbmVyRWwuZW1wdHkoKTtcblxuXHRcdGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMicsIHt0ZXh0OiAnVG91Y2ggQmFyIEl0ZW1zJ30pO1xuXHRcdGNvbnRhaW5lckVsLmNyZWF0ZUVsKFwicFwiLCB7dGV4dDogXCJUbyBhZGQgYW4gaXRlbSB0byB5b3VyIFRvdWNoIEJhciwgY2xpY2sgdGhlIGJ1dHRvbiBiZWxvdy4gWW91IGNhbiB0aGVuIGVkaXQgdGhlIGl0ZW0gaW4gdGhlIGxpc3QgYmVsb3cuXCJ9KVxuXG5cdFx0Y29uc3QgbW9kaWZ5T3JBZGRBcnJheSA9IGFzeW5jIChpdGVtOiBPYnNpZGlhblRvdWNoQmFyQnV0dG9uKSA9PiB7XG5cdFx0XHQvL2NoZWNrIGZvciBhbiBpdGVtIHdpdGggdGhlIHNhbWUgaWRcblx0XHRcdGNvbnN0IGluZGV4ID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MudG91Y2hiYXJJdGVtcy5maW5kSW5kZXgoKGVsZW1lbnQpID0+IGVsZW1lbnQuaWQgPT09IGl0ZW0uaWQpXG5cdFx0XHRpZiAoaW5kZXggPT09IC0xKSB7XG5cdFx0XHRcdC8vYWRkIHRoZSBpdGVtIHRvIHRoZSBhcnJheVxuXHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy50b3VjaGJhckl0ZW1zLnB1c2goaXRlbSlcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vcmVwbGFjZSB0aGUgaXRlbSBpbiB0aGUgYXJyYXlcblx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MudG91Y2hiYXJJdGVtc1tpbmRleF0gPSBpdGVtXG5cdFx0XHR9XG5cdFx0XHR0aGlzLnBsdWdpbi51cGRhdGVUb3VjaEJhcigpXG5cdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKVxuXHRcdH1cblxuXHRcdC8qKlxuXHRcdCAqIENyZWF0ZXMgYSBuZXcgdG91Y2hiYXIgYnV0dG9uIGl0ZW0gZm9yIHRoZSB1c2VyIHRvIGZpbGwgb3V0XG5cdFx0ICogQHBhcmFtIGl0ZW1cblx0XHQgKi9cblx0XHRjb25zdCBjcmVhdGVUb3VjaGJhckl0ZW0gPSAoaXRlbTogT2JzaWRpYW5Ub3VjaEJhckl0ZW0pID0+IHtcblxuXHRcdFx0Y29uc3QgaXRlbUVsID0gaXRlbUNvbnRhaW5lci5jcmVhdGVEaXYoJ3RvdWNoYmFyLWl0ZW0nKTtcblxuXHRcdFx0Ly9jcmVhdGUgdGhlIG1vdmUgYnV0dG9uc1xuXHRcdFx0Y29uc3QgbW92ZUJ1dHRvbnMgPSBpdGVtRWwuY3JlYXRlRGl2KFwibW92ZS1idXR0b25zLWRpdlwiKTtcblxuXG5cdFx0XHRjb25zdCBtb3ZlVXAgPSBtb3ZlQnV0dG9ucy5jcmVhdGVFbCgnYnV0dG9uJywgXCJ0b3VjaGJhci1pdGVtLWJ1dHRvblwiKTtcblx0XHRcdHNldEljb24obW92ZVVwLCAnY2hldnJvbi11cCcpXG5cblx0XHRcdGNvbnN0IG1vdmVEb3duID0gbW92ZUJ1dHRvbnMuY3JlYXRlRWwoJ2J1dHRvbicsIFwidG91Y2hiYXItaXRlbS1idXR0b25cIik7XG5cdFx0XHRzZXRJY29uKG1vdmVEb3duLCAnY2hldnJvbi1kb3duJylcblxuXHRcdFx0bW92ZVVwLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHQvL21vdmUgdGhlIGl0ZW0gdXAgaW4gdGhlIGFycmF5XG5cdFx0XHRcdGNvbnN0IGluZGV4ID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MudG91Y2hiYXJJdGVtcy5maW5kSW5kZXgoKGVsZW1lbnQpID0+IGVsZW1lbnQuaWQgPT09IGl0ZW0uaWQpXG5cdFx0XHRcdGlmIChpbmRleCA+IDApIHtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy50b3VjaGJhckl0ZW1zLnNwbGljZShpbmRleCAtIDEsIDAsIHRoaXMucGx1Z2luLnNldHRpbmdzLnRvdWNoYmFySXRlbXMuc3BsaWNlKGluZGV4LCAxKVswXSlcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi51cGRhdGVUb3VjaEJhcigpXG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKClcblx0XHRcdFx0XHQvL21vdmUgdGhlIGl0ZW0gdmlzdWFsbHkgdXBcblx0XHRcdFx0XHRpdGVtRWwucHJldmlvdXNTaWJsaW5nPy5iZWZvcmUoaXRlbUVsKVxuXHRcdFx0XHR9XG5cdFx0XHR9KVxuXHRcdFx0bW92ZURvd24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7XG5cdFx0XHRcdC8vbW92ZSB0aGUgaXRlbSBkb3duIGluIHRoZSBhcnJheVxuXHRcdFx0XHRjb25zdCBpbmRleCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnRvdWNoYmFySXRlbXMuZmluZEluZGV4KChlbGVtZW50KSA9PiBlbGVtZW50LmlkID09PSBpdGVtLmlkKVxuXHRcdFx0XHRpZiAoaW5kZXggPCB0aGlzLnBsdWdpbi5zZXR0aW5ncy50b3VjaGJhckl0ZW1zLmxlbmd0aCAtIDEpIHtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy50b3VjaGJhckl0ZW1zLnNwbGljZShpbmRleCArIDEsIDAsIHRoaXMucGx1Z2luLnNldHRpbmdzLnRvdWNoYmFySXRlbXMuc3BsaWNlKGluZGV4LCAxKVswXSlcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi51cGRhdGVUb3VjaEJhcigpXG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKClcblx0XHRcdFx0XHQvL21vdmUgdGhlIGl0ZW0gdmlzdWFsbHkgZG93blxuXHRcdFx0XHRcdGl0ZW1FbC5uZXh0U2libGluZz8uYWZ0ZXIoaXRlbUVsKVxuXHRcdFx0XHR9XG5cblx0XHRcdH0pXG5cblx0XHRcdGNvbnN0IGl0ZW1zID0gaXRlbS5nZXRJdGVtRm9yRGlzcGxheSgpXG5cdFx0XHRpdGVtRWwuYXBwZW5kKGl0ZW1zKVxuXHRcdFx0Ly9hZGQgZXZlbnQgbGlzdGVuZXJzIHRvIGFsbCB0aGUgaW5wdXRzXG5cdFx0XHRpdGVtcy5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dCcpLmZvckVhY2goKGlucHV0KSA9PiB7XG5cdFx0XHRcdGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGFzeW5jICgpID0+IHtcblx0XHRcdFx0XHRhd2FpdCBtb2RpZnlPckFkZEFycmF5KGl0ZW0pXG5cdFx0XHRcdH0pXG5cdFx0XHR9KTtcblxuXHRcdFx0Y29uc3QgcmVtb3ZlQnV0dG9uID0gaXRlbUVsLmNyZWF0ZUVsKCdidXR0b24nLCBcInRvdWNoYmFyLWl0ZW0tYnV0dG9uIHJlbW92ZS1idXR0b25cIik7XG5cdFx0XHRzZXRJY29uKHJlbW92ZUJ1dHRvbiwgJ3gnKVxuXG5cdFx0XHRyZW1vdmVCdXR0b24ub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdFx0Ly9yZW1vdmUgdGhlIGl0ZW1cblx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MudG91Y2hiYXJJdGVtcyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnRvdWNoYmFySXRlbXMuZmlsdGVyKChpKSA9PiBpICE9PSBpdGVtKTtcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdHRoaXMucGx1Z2luLnVwZGF0ZVRvdWNoQmFyKClcblx0XHRcdFx0aXRlbUVsLnJlbW92ZSgpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vdGhpcyBpcyBhIGRyb3Bkb3duIHRoYXQgc2hvd3MgdXAgd2hlbiBjbGlja2luZyB0aGUgYWRkIGJ1dHRvbiB0byBzZWxlY3QgdGhlIHR5cGUgb2YgdG91Y2hiYXIgaXRlbSB5b3Ugd2FudCB0byBhZGRcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoJ0FkZCBUb3VjaCBCYXIgaXRlbScpXG5cdFx0XHQuc2V0RGVzYygnQ2xpY2sgdGhlIFwiK1wiIGJ1dHRvbiB0byBzdGFydCBjcmVhdGluZyBhIG5ldyBUb3VjaCBCYXIgaXRlbS4nKVxuXHRcdFx0LmFkZEJ1dHRvbihjYiA9PiB7XG5cdFx0XHRcdGNiLnNldEJ1dHRvblRleHQoJ0FkZCcpXG5cdFx0XHRcdFx0Lm9uQ2xpY2soYXN5bmMgKGV2ZW50KSA9PiB7XG5cdFx0XHRcdFx0XHQvL2NyZWF0ZSBhIGRpdiBjb250YWluaW5nIGFsbCB0aGUgb3B0aW9ucyB1bmRlciB0aGUgbW91c2UgY3Vyc29yXG5cdFx0XHRcdFx0XHRjb25zdCBtb3VzZVBvcyA9IHt4OiBldmVudC5vZmZzZXRYLCB5OiBldmVudC5vZmZzZXRZfVxuXHRcdFx0XHRcdFx0Y29uc3QgZHJvcGRvd24gPSBjb250YWluZXJFbC5jcmVhdGVEaXYoJ3RvdWNoYmFyLWRyb3Bkb3duJyk7XG5cdFx0XHRcdFx0XHRjb25zb2xlLmxvZyhtb3VzZVBvcylcblx0XHRcdFx0XHRcdC8vbW92ZSB0aGUgaXRlbSB1bmRlciB0aGUgbW91c2UgY3Vyc29yXG5cdFx0XHRcdFx0XHRkcm9wZG93bi5zdHlsZS5yaWdodCA9IG1vdXNlUG9zLnggKyAncHgnXG5cdFx0XHRcdFx0XHRkcm9wZG93bi5zdHlsZS50b3AgPSBtb3VzZVBvcy55ICsgJ3B4J1xuXG5cdFx0XHRcdFx0XHRkcm9wZG93bi5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRkcm9wZG93bi5yZW1vdmUoKVxuXHRcdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0XHRcdC8vY3JlYXRlIHRoZSBidXR0b25zXG5cdFx0XHRcdFx0XHRjb25zdCBidXR0b24gPSAodGV4dDogc3RyaW5nLCAgb25DbGljazogKCkgPT4gdm9pZCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRjb25zdCBidXR0b24gPSBkcm9wZG93bi5jcmVhdGVFbCgnYnV0dG9uJywgJ3RvdWNoYmFyLWRyb3Bkb3duLWJ1dHRvbicpO1xuXHRcdFx0XHRcdFx0XHRidXR0b24uY3JlYXRlRWwoJ3NwYW4nLCB7dGV4dDogdGV4dH0pO1xuXHRcdFx0XHRcdFx0XHRidXR0b24uY2xhc3NMaXN0LmFkZCgndG91Y2hiYXItZHJvcGRvd24tYnV0dG9uJylcblx0XHRcdFx0XHRcdFx0YnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdG9uQ2xpY2soKVxuXHRcdFx0XHRcdFx0XHRcdGRyb3Bkb3duLnJlbW92ZSgpXG5cdFx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdGJ1dHRvbignQnV0dG9uJywgKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRjb25zb2xlLmxvZygnYnV0dG9uJylcblx0XHRcdFx0XHRcdFx0Y3JlYXRlVG91Y2hiYXJJdGVtKG5ldyBPYnNpZGlhblRvdWNoQmFyQnV0dG9uKHtsYWJlbDogJycsIG1hY3JvOiAnJ30gYXMgVG91Y2hCYXJCdXR0b25Qcm9wZXJ0aWVzKSlcblx0XHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdFx0XHRidXR0b24oJ0xhYmVsJywgKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRjcmVhdGVUb3VjaGJhckl0ZW0obmV3IE9ic2lkaWFuVG91Y2hCYXJMYWJlbCh7bGFiZWw6ICcnfSBhcyBUb3VjaEJhckxhYmVsUHJvcGVydGllcykpXG5cdFx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRcdFx0YnV0dG9uKCdTcGFjZXInLCAoKSA9PiB7XG5cblx0XHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdFx0XHRidXR0b24oJ1NsaWRlcicsICgpID0+IHtcblxuXHRcdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0XHRcdGJ1dHRvbignU2VnbWVudGVkIENvbnRyb2wnLCAoKSA9PiB7XG5cblx0XHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdFx0XHRidXR0b24oJ1BvcG92ZXInLCAoKSA9PiB7XG5cblx0XHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdFx0XHRidXR0b24oJ1NjcnViYmVyJywgKCkgPT4ge1xuXG5cdFx0XHRcdFx0XHR9KTtcblxuXG5cdFx0XHRcdFx0fSlcblx0XHRcdFx0XHQuc2V0VG9vbHRpcCgnQWRkIGEgbmV3IHRvdWNoYmFyIGl0ZW0nKVxuXHRcdFx0XHRcdC5zZXRJY29uKCdwbHVzJylcblx0XHRcdFx0XHQuc2V0Q3RhKClcblx0XHRcdH0pXG5cblx0XHRjb25zdCBpdGVtQ29udGFpbmVyID0gY29udGFpbmVyRWwuY3JlYXRlRWwoJ2RpdicpO1xuXHRcdGl0ZW1Db250YWluZXIuY3JlYXRlRWwoJ2gyJywge3RleHQ6ICdDdXJyZW50IFRvdWNoIEJhciBJdGVtcyd9KTtcblxuXHRcdGNvbnN0IHRvdWNoYmFySXRlbXMgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy50b3VjaGJhckl0ZW1zO1xuXHRcdC8vbGlzdCBhbGwgdGhlIGxvYWRlZCBpdGVtc1xuXHRcdGNvbnNvbGUubG9nKHRvdWNoYmFySXRlbXMpXG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCB0b3VjaGJhckl0ZW1zLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRjcmVhdGVUb3VjaGJhckl0ZW0oZGVzZXJpYWxpemVUb3VjaEJhckl0ZW0odG91Y2hiYXJJdGVtc1tpXSkpO1xuXHRcdH1cblxuXG5cdFx0Ly9hZGQgZGl2aWRlclxuXHRcdGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdocicpO1xuXHRcdC8vTWFrcm8gc2VjdGlvblxuXG5cdFx0Y29udGFpbmVyRWwuY3JlYXRlRWwoXCJoMlwiLCB7dGV4dDogXCJNYWNyb3NcIn0pXG5cdFx0Y29uc3QgZGVzY3JpcHRpb24gPSBjb250YWluZXJFbC5jcmVhdGVFbChcInBcIiwge3RleHQ6IFwiVXNlIG1hY3JvcyB0byBnaXZlIHlvdXIgVG91Y2ggQmFyIGl0ZW1zIGZ1bmN0aW9uYWxpdHksIGJ1dCBiZSBjYXJlZnVsIGFzIHRoZXNlIGNhbiBoYXZlIHRoZSBhYmlsaXR5IHRvIG1vZGlmeSBmaWxlcyBpbiB1bmludGVuZGVkIHdheXMhIElmIHlvdSB1bnN1cmUgcGxlYXNlIGNvbnNpZGVyIHRyeWluZyBvdXQgdGhlIG1hY3JvIGluIGEgbmV3IHZhdWx0IGZpcnN0LiBcIn0pXG5cdFx0ZGVzY3JpcHRpb24uY2xhc3NMaXN0LmFkZChcInRvdWNoYmFyLXNldHRpbmdzLWRlc2NyaXB0aW9uXCIpXG5cdFx0ZGVzY3JpcHRpb24uY3JlYXRlRWwoXCJhXCIsIHtcblx0XHRcdHRleHQ6IFwiTGlzdCBvZiBhdmFpbGFibGUga2V5Y29kZXNcIixcblx0XHRcdGhyZWY6IFwiaHR0cHM6Ly93d3cuZWxlY3Ryb25qcy5vcmcvZG9jcy9sYXRlc3QvYXBpL2FjY2VsZXJhdG9yI2F2YWlsYWJsZS1rZXktY29kZXNcIixcblx0XHR9KVxuXG5cdFx0Y29uc3QgbWFjcm9UYWJsZSA9IGNvbnRhaW5lckVsLmNyZWF0ZUVsKFwidGFibGVcIiwgXCJ0b3VjaGJhci1tYWNyby10YWJsZVwiKVxuXHRcdGNvbnN0IG1hY3JvVGFibGVIZWFkID0gbWFjcm9UYWJsZS5jcmVhdGVFbChcInRoZWFkXCIpXG5cdFx0Y29uc3QgbWFjcm9UYWJsZUhlYWRSb3cgPSBtYWNyb1RhYmxlSGVhZC5jcmVhdGVFbChcInRyXCIpXG5cdFx0Y29uc3QgbWFjcm9UYWJsZUhlYWRSb3dOYW1lID0gbWFjcm9UYWJsZUhlYWRSb3cuY3JlYXRlRWwoXCJ0aFwiKVxuXHRcdGNvbnN0IG1hY3JvVGFibGVIZWFkUm93TmFtZTIgPSBtYWNyb1RhYmxlSGVhZFJvdy5jcmVhdGVFbChcInRoXCIpXG5cdFx0Y29uc3QgbWFjcm9UYWJsZUhlYWRSb3dOYW1lMyA9IG1hY3JvVGFibGVIZWFkUm93LmNyZWF0ZUVsKFwidGhcIilcblx0XHRtYWNyb1RhYmxlSGVhZFJvd05hbWUuc2V0VGV4dChcIlN5bnRheFwiKVxuXHRcdG1hY3JvVGFibGVIZWFkUm93TmFtZTIuc2V0VGV4dChcIkRlc2NyaXB0aW9uXCIpXG5cdFx0bWFjcm9UYWJsZUhlYWRSb3dOYW1lMy5zZXRUZXh0KFwiRXhhbXBsZVwiKVxuXHRcdGNvbnN0IG1hY3JvVGFibGVCb2R5ID0gbWFjcm9UYWJsZS5jcmVhdGVFbChcInRib2R5XCIpXG5cblxuXHRcdC8vbG9hZCB0aGUgc3ludGF4IG5hbWVzIGFuZCBkZXNjcmlwdGlvbnMgZnJvbSBtYWNyb19kZXNjLmpzb25cblx0XHRjb25zdCB7IG1hY3JvcyB9ID0gcmVxdWlyZSgnLi9tYWNyb19kZXNjLmpzb24nKVxuXG5cdFx0Ly9sb29wIHRocm91Z2ggdGhlIG1ha3JvIGRlc2NyaXB0aW9ucyBhbmQgYWRkIHRoZW0gdG8gdGhlIHRhYmxlXG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBtYWNyb3MubGVuZ3RoOyBpKyspIHtcblx0XHRcdGNvbnN0IHJvdyA9IG1hY3JvVGFibGVCb2R5LmNyZWF0ZUVsKFwidHJcIilcblx0XHRcdGNvbnN0IG5hbWUgPSByb3cuY3JlYXRlRWwoXCJ0ZFwiLCBcInRvdWNoYmFyLW1hY3JvLXRhYmxlLWJvcmRlclwiKVxuXHRcdFx0Y29uc3QgZGVzYyA9IHJvdy5jcmVhdGVFbChcInRkXCIsIFwidG91Y2hiYXItbWFjcm8tdGFibGUtYm9yZGVyXCIpXG5cdFx0XHRjb25zdCBleGFtcGxlID0gcm93LmNyZWF0ZUVsKFwidGRcIiwgXCJ0b3VjaGJhci1tYWNyby10YWJsZS1ib3JkZXJcIilcblx0XHRcdG5hbWUuc2V0VGV4dChtYWNyb3NbaV1bXCJzeW50YXhcIl0pXG5cdFx0XHRkZXNjLnNldFRleHQobWFjcm9zW2ldW1wiZGVzY3JpcHRpb25cIl0pXG5cdFx0XHRleGFtcGxlLnNldFRleHQobWFjcm9zW2ldW1wiZXhhbXBsZVwiXSlcblx0XHR9XG5cblx0fVxuXG59XG5cblxuIiwgImltcG9ydCB7ZXhlY3V0ZU1hY3JvfSBmcm9tIFwiLi4vbWFjcm9cIjtcbmltcG9ydCB7QXBwfSBmcm9tIFwib2JzaWRpYW5cIjtcblxuXG5cbi8qKlxuICogQWJzdHJhY3QgY2xhc3MgcmVwZXJlc2VudGluZyBhIHRvdWNoIGJhciBpdGVtXG4gKi9cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBPYnNpZGlhblRvdWNoQmFySXRlbSB7XG5cdHByb3BlcnRpZXM6IGFueTtcblx0dHlwZTogVG91Y2hCYXJJdGVtVHlwZTtcblx0aWQ6IHN0cmluZztcblx0YXBwOiBBcHA7XG5cblx0cHJvdGVjdGVkIGNvbnN0cnVjdG9yKHByb3BlcnRpZXM6IGFueSwgaWQ6IHN0cmluZyA9IFwiXCIpIHtcblx0XHR0aGlzLnByb3BlcnRpZXMgPSBwcm9wZXJ0aWVzO1xuXHRcdHRoaXMuaWQgPSBpZCA9PT0gXCJcIiA/IHRoaXMuZ2VuZXJhdGVJRCgpIDogaWQ7XG5cdH1cblxuXHRnZW5lcmF0ZUlEKCk6IHN0cmluZyB7XG5cdFx0cmV0dXJuIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZyg3KTtcblx0fVxuXG5cdC8qKlxuXHQgKiBSZXR1cm5zIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSB0b3VjaCBiYXIgaXRlbVxuXHQgKiBAcmV0dXJucyB7YW55fVxuXHQgKi9cblx0Z2V0UHJvcGVydGllcygpOiBhbnkge1xuXHRcdHJldHVybiB0aGlzLnByb3BlcnRpZXM7XG5cdH07XG5cblx0LyoqXG5cdCAqIFJldHVybnMgdGhlIGNvcnJlc3BvbmRpbmcgb2JqZWN0LCB0aGF0IGNhbiBkaXJlY3RseSBiZSBwdXQgaW50byB0aGUgdG91Y2hiYXIgYXJyYXlcblx0ICovXG5cdGFic3RyYWN0IGdldEl0ZW1Gb3JFbGVjdHJvbigpOiBhbnk7XG5cblx0LyoqXG5cdCAqIFJldHVybnMgdGhlIGNvcnJlc3BvbmRpbmcgSFRNTCBlbGVtZW50LCB0aGF0IGNhbiBiZSBkaXNwbGF5ZWQgaW4gdGhlIHNldHRpbmdzXG5cdCAqIEByZXR1cm5zIHtIVE1MRWxlbWVudH1cblx0ICovXG5cdGFic3RyYWN0ICBnZXRJdGVtRm9yRGlzcGxheSgpOiBIVE1MRWxlbWVudDtcbn1cblxuXG4vKipcbiAqIFJlcHJlc2VudHMgdGhlIHNlcmlhbGl6ZWQgdmVyc2lvbiBvZiBhIHRvdWNoIGJhciBpdGVtXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgU2VyaWFsaXplZFRvdWNoQmFySXRlbSB7XG5cdHR5cGU6IFRvdWNoQmFySXRlbVR5cGVcblx0aWQ6IHN0cmluZ1xuXHRwcm9wZXJ0aWVzOiBhbnlcbn1cblxuXG5cbi8qKlxuICogQWxsIHRoZSBwb3NzaWJsZSB0eXBlcyBvZiB0b3VjaCBiYXIgaXRlbXNcbiAqL1xuZXhwb3J0IGVudW0gVG91Y2hCYXJJdGVtVHlwZSB7XG5cdE9ic2lkaWFuVG91Y2hCYXJCdXR0b24gPSBcIk9ic2lkaWFuVG91Y2hCYXJCdXR0b25cIixcblx0T2JzaWRpYW5Ub3VjaEJhckNvbG9yUGlja2VyID0gXCJPYnNpZGlhblRvdWNoQmFyQ29sb3JQaWNrZXJcIixcblx0T2JzaWRpYW5Ub3VjaEJhckdyb3VwID0gXCJPYnNpZGlhblRvdWNoQmFyR3JvdXBcIixcblx0T2JzaWRpYW5Ub3VjaEJhckxhYmVsID0gXCJPYnNpZGlhblRvdWNoQmFyTGFiZWxcIixcblx0T2JzaWRpYW5Ub3VjaEJhclBvcG92ZXIgPSBcIk9ic2lkaWFuVG91Y2hCYXJQb3BvdmVyXCIsXG5cdE9ic2lkaWFuVG91Y2hCYXJTY3J1YmJlciA9IFwiT2JzaWRpYW5Ub3VjaEJhclNjcnViYmVyXCIsXG5cdE9ic2lkaWFuVG91Y2hCYXJTZWdtZW50ZWRDb250cm9sID0gXCJPYnNpZGlhblRvdWNoQmFyU2VnbWVudGVkQ29udHJvbFwiLFxuXHRPYnNpZGlhblRvdWNoQmFyU2xpZGVyID0gXCJPYnNpZGlhblRvdWNoQmFyU2xpZGVyXCIsXG5cdE9ic2lkaWFuVG91Y2hCYXJTcGFjZXIgPSBcIk9ic2lkaWFuVG91Y2hCYXJTcGFjZXJcIixcbn1cbiIsICJpbXBvcnQge0FwcH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5jb25zdCBlbGVjdHJvbiA9IHJlcXVpcmUoJ2VsZWN0cm9uJykucmVtb3RlXG4vKlxuKiBUaGlzIGZ1bmN0aW9uIGV4ZWN1dGVzIHRoZSBtYWtybyB3cml0dGVuIGluIHRoZSBtYWtybyBsYW5ndWFnZVxuKiB8IFN5bnRheCAgICB8IERlc2NyaXB0aW9uICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuKiB8LS0tLS0tLS0tLS18LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfFxuKiB8IFtLRVlDT0RFXSB8IFRoaXMgaXMgaG93IHlvdSBwcmVzcyBhIGtleSwgd2hlcmUgYEtFWUNPREVgIGlzIHRoZSBuYW1lIG9mIHRoZSBrZXkgeW91IHdhbnQgcHJlc3NlZCAgICAgICAgICAgfFxuKiB8ICsgICAgICAgICB8ICsgaXMgdXNlZCB0byBhZGQgYSBtb2RpZmllciBlZzogW0NtZF0rW1BdIGZvciBwcmVzc2luZyBDb21tYW5kLVAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiogfCAsREVMQVksICAgfCAsIGlzIHVzZWQgdG8gYWRkIGEgZGVsYXkgYmV0d2VlbiBrZXkgcHJlc3NlcyB3aGVyZSBgREVMQVlgIGlzIHRoZSBhbW91bnQgaW4gbXMgICAgICAgICAgICAgICAgIHxcbiogfCBcIlRFWFRcIiAgICB8IFwiIGlzIHVzZWQgdG8gYWRkIHRleHQgd2hlcmUgYFRFWFRgIGlzIHRoZSB0ZXh0IHlvdSB3YW50IHRvIGFkZC4gVGhlIHBsdWdpbiB3aWxsIHR5cGUgdGhpcyB0ZXh0IHxcbiogfCAjQ09NTUVOVCMgICAgICAgICB8ICMgaXMgdXNlZCB0byBhZGQgYSBjb21tZW50IHdoZXJlIGBDT01NRU5UYCBpcyB0aGUgY29tbWVudCB5b3Ugd2FudCB0byBhZGQgIChOT1QgSU1QTEVNRU5URUQpICAgfFxuKiB8IFxcICAgICAgICAgfCBcXCBpcyB1c2VkIHRvIGVzY2FwZSB0aGUgbmV4dCBjaGFyYWN0ZXIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiogfCAoICl7UkVQRUFUfSB8ICgpIGlzIHVzZWQgdG8gcmVwZWF0IHRoZSBwcmV2aW91cyBjb21tYW5kIHdoZXJlIGBSRVBFQVRgIGlzIHRoZSBhbW91bnQgb2YgdGltZXMgdG8gcmVwZWF0ICAgICAgfFxuKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGV4ZWN1dGVNYWNybyhhcHA6IEFwcCwgbWFrcm86IHN0cmluZykge1xuXHQvL3BhcnNlIHRoZSBpbnB1dCwgd2hpY2ggaXMganVzdCBvbmUgbG9uZyBzdHJpbmcgb2YgdGhlIGNvbW1hbmRzIGFib3ZlXG5cdGNvbnN0IGNvbW1hbmRzID0gcGFyc2VNYWNybyhtYWtybylcblx0Ly9leGVjdXRlIHRoZSBjb21tYW5kc1xuXHRleGVjdXRlQ29tbWFuZHMoYXBwLCBjb21tYW5kcylcbn1cblxubGV0IHJlcGVhdGNvdW50ZXIgPSAwXG5hc3luYyBmdW5jdGlvbiBleGVjdXRlQ29tbWFuZHMoYXBwOiBBcHAsIGNvbW1hbmRzOiBNYWNyb0NvbW1hbmRbXSkge1xuXHRjb25zb2xlLmxvZyhjb21tYW5kcylcblx0Zm9yIChjb25zdCBjb21tYW5kIG9mIGNvbW1hbmRzKSB7XG5cdFx0aWYgKGNvbW1hbmQuY29tbWFuZCA9PT0gTWFjcm9Db21tYW5kVHlwZS5SZXBlYXRTdGFydCkge1xuXHRcdFx0cmVwZWF0Y291bnRlciA9IHBhcnNlSW50KGNvbW1hbmQuYXJndW1lbnQpO1xuXHRcdH1cblxuXHRcdC8vcmVjdXJzaXZlbHkgZXhlY3V0ZSB0aGUgY29tbWFuZHMgaW5zaWRlIHRoZSByZXBlYXQgY29tbWFuZFxuXHRcdGlmIChyZXBlYXRjb3VudGVyID4gMCkge1xuXHRcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCByZXBlYXRjb3VudGVyIC0gMTsgaSsrKSB7XG5cdFx0XHRcdC8vZ2V0IHRoZSBzdWJhcnJheSB3aGljaCBpcyBldmVyeXRoaW5nIGJldHdlZW4gdGhlIHJlcGVhdCBzdGFydCBhbmQgdGhlIHJlcGVhdCBlbmRcblx0XHRcdFx0Y29uc3QgaW5zaWRlQ29tbWFuZHMgPSBjb21tYW5kcy5zbGljZShjb21tYW5kcy5pbmRleE9mKGNvbW1hbmQpICsgMSwgY29tbWFuZHMuaW5kZXhPZig8TWFjcm9Db21tYW5kPmNvbW1hbmRzLmZpbmQoKGNvbW1hbmQpID0+IGNvbW1hbmQuY29tbWFuZCA9PT0gTWFjcm9Db21tYW5kVHlwZS5SZXBlYXRFbmQpKSlcblx0XHRcdFx0ZXhlY3V0ZUNvbW1hbmRzKGFwcCwgaW5zaWRlQ29tbWFuZHMpXG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly9jaGVjayBpZiB0aGUgY3VycmVudCBjb21tYW5kIGlzIGEga2V5Y29kZSBjb21tYW5kIGFuZCB0aGUgbmV4dCBpcyBhIHByZXNza2V5cyBjb21tYW5kXG5cdFx0aWYgKGNvbW1hbmQuY29tbWFuZCA9PT0gTWFjcm9Db21tYW5kVHlwZS5QcmVzc0tleSAmJiBjb21tYW5kc1tjb21tYW5kcy5pbmRleE9mKGNvbW1hbmQpICsgMV0/LmNvbW1hbmQgPT09IE1hY3JvQ29tbWFuZFR5cGUuUHJlc3NLZXlzICYmIGNvbW1hbmRzW2NvbW1hbmRzLmluZGV4T2YoY29tbWFuZCkgKyAyXT8uY29tbWFuZCA9PT0gTWFjcm9Db21tYW5kVHlwZS5QcmVzc0tleSkge1xuXHRcdFx0Ly9wcmVzcyB0aG9zZSB0d28ga2V5cyB0b2dldGhlclxuXHRcdFx0cHJlc3NLZXlzKGFwcCwgY29tbWFuZC5hcmd1bWVudCwgY29tbWFuZHNbY29tbWFuZHMuaW5kZXhPZihjb21tYW5kKSArIDJdPy5hcmd1bWVudClcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly9leGVjdXRlIHRoZSBjb21tYW5kXG5cdFx0XHRzd2l0Y2ggKGNvbW1hbmQuY29tbWFuZCkge1xuXHRcdFx0XHRjYXNlIE1hY3JvQ29tbWFuZFR5cGUuUHJlc3NLZXk6XG5cdFx0XHRcdFx0cHJlc3NLZXkoYXBwLCBjb21tYW5kLmFyZ3VtZW50KVxuXHRcdFx0XHRcdGJyZWFrXG5cdFx0XHRcdGNhc2UgTWFjcm9Db21tYW5kVHlwZS5BZGRUZXh0OlxuXHRcdFx0XHRcdGFkZFRleHQoYXBwLCBjb21tYW5kLmFyZ3VtZW50KVxuXHRcdFx0XHRcdGJyZWFrXG5cdFx0XHRcdGNhc2UgTWFjcm9Db21tYW5kVHlwZS5EZWxheTpcblx0XHRcdFx0XHRhd2FpdCB3YWl0Rm9yKGNvbW1hbmQuYXJndW1lbnQpXG5cdFx0XHRcdFx0YnJlYWtcblx0XHRcdFx0Y2FzZSBNYWNyb0NvbW1hbmRUeXBlLkFkZENvbW1lbnQ6XG5cdFx0XHRcdFx0YnJlYWtcblxuXHRcdFx0fVxuXHRcdH1cblx0fVxufVxuXG5mdW5jdGlvbiB3YWl0Rm9yKGFyZ3VtZW50OiBzdHJpbmcpIHtcblx0Ly9zbGVlcCBmb3IgdGhlIGFtb3VudCBvZiB0aW1lIHNwZWNpZmllZCBpbiB0aGUgYXJndW1lbnRcblx0cmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCBwYXJzZUludChhcmd1bWVudCkpKVxufVxuXG5cbmZ1bmN0aW9uIGFkZFRleHQoYXBwOiBBcHAsIHRleHQ6IHN0cmluZykge1xuXHQvL2FkZCB0aGUgdGV4dFxuXHRjb25zb2xlLmxvZyh0ZXh0KVxuXHQvL3NwbGl0IHR0aGUgdGV4dCBpbnRvIHNldHMgb2YgMyBjaGFyYWN0ZXJzXG5cdGNvbnN0IGNoYXJhY3RlcnMgPSB0ZXh0LnNwbGl0KFwiXCIpXG5cdGNvbnN0IHdpbiA9IGVsZWN0cm9uLkJyb3dzZXJXaW5kb3cuZ2V0Rm9jdXNlZFdpbmRvdygpXG5cdGNoYXJhY3RlcnMuZm9yRWFjaCgoY2hhcikgPT4ge1xuXHRcdHdpbi53ZWJDb250ZW50cy5zZW5kSW5wdXRFdmVudCh7a2V5Q29kZTogY2hhciwgdHlwZTogXCJjaGFyXCJ9KVxuXHR9KVxufVxuXG5mdW5jdGlvbiBwcmVzc0tleXMoYXBwOiBBcHAsIGtleTE6IHN0cmluZywga2V5Mjogc3RyaW5nKSB7XG5cdC8vcHJlc3MgdGhlIGtleXNcblx0Y29uc3Qgd2luID0gZWxlY3Ryb24uQnJvd3NlcldpbmRvdy5nZXRGb2N1c2VkV2luZG93KClcblx0Ly9zbGVlcCBmb3IgMTBtc1xuXHRjb25zdCBtb2RzID0ga2V5MS5zcGxpdChcIiBcIilcblx0d2luLndlYkNvbnRlbnRzLnNlbmRJbnB1dEV2ZW50KHtrZXlDb2RlOiBrZXkyLCB0eXBlOiBcImtleURvd25cIiwgbW9kaWZpZXJzOiBtb2RzfSlcblxuXHR3aW4ud2ViQ29udGVudHMuc2VuZElucHV0RXZlbnQoe2tleUNvZGU6IGtleTIsIHR5cGU6IFwia2V5VXBcIn0pXG59XG5cbmZ1bmN0aW9uIHByZXNzS2V5KGFwcDogQXBwLCBrZXk6IHN0cmluZykge1xuXHQvL3ByZXNzIHRoZSBrZXlcblx0Y29uc29sZS5sb2coa2V5KVxuXHRjb25zdCBicm93c2VyV2luZG93ID0gZWxlY3Ryb24uQnJvd3NlcldpbmRvdy5nZXRGb2N1c2VkV2luZG93KClcblx0YnJvd3NlcldpbmRvdy53ZWJDb250ZW50cy5zZW5kSW5wdXRFdmVudCh7a2V5Q29kZToga2V5LCB0eXBlOiBcImtleURvd25cIn0pO1xuXHRicm93c2VyV2luZG93LndlYkNvbnRlbnRzLnNlbmRJbnB1dEV2ZW50KHtrZXlDb2RlOiBrZXksIHR5cGU6IFwia2V5VXBcIn0pO1xufVxuXG4vKipcbiAqIFRoaXMgaG9ycmlibGUgbW9uc3Ryb3NpdHkgb2YgYSBmdW5jdGlvbiBwYXJzZXMgdGhlIHN0cmluZyBvZiBtYWNyb3MgaW50IGFuIGFycmF5IG9mIGNvbW1hbmRzXG4gKiBAcGFyYW0gbWFjcm9cbiAqIEByZXR1cm4ge01hY3JvQ29tbWFuZFtdfSB0aGUgYXJyYXkgb2YgY29tbWFuZHNcbiAqL1xuZnVuY3Rpb24gcGFyc2VNYWNybyhtYWNybzogc3RyaW5nKSB7XG5cdC8vc3BsaXQgdGhlIG1hY3JvIGludG8gY29tbWFuZHNcblx0Y29uc3QgY2hhcmFjdGVycyA9IG1hY3JvLnNwbGl0KFwiXCIpXG5cdC8vZXh0cmFjdCB0aGUgY29tbWFuZHMgYW5kIGl0cyBhcmd1bWVudHNcblx0Y29uc3QgcGFyc2VkQ29tbWFuZHM6IE1hY3JvQ29tbWFuZFtdID0gW11cblx0bGV0IGN1cnJlbnRDb21tYW5kID0gXCJcIlxuXHRsZXQgY3VycmVudEFyZ3VtZW50ID0gXCJcIlxuXHRsZXQgaXNFc2NhcGVkID0gZmFsc2Vcblx0bGV0IGNvbW1hbmRTdGFydGVkID0gZmFsc2Vcblx0bGV0IGNvbW1hbmRFc2NhcGVkID0gZmFsc2Vcblx0Y2hhcmFjdGVycy5mb3JFYWNoKChjb21tYW5kKSA9PiB7XG5cdFx0Ly9pZiB0aGUgY3VycmVudCBjaGFyYWN0ZXIgaXMgYSBbIGFkZCB0aGF0IGFuZCBhbGwgdGhlIHN1YnNlcXVlbnQgY2hhcmFjdGVycyB1bnRpbCB0aGUgbmV4dCBdIHRvIHRoZSBjdXJyZW50IGNvbW1hbmRcblx0XHRzd2l0Y2ggKGNvbW1hbmQpIHtcblx0XHRcdGNhc2UgXCJbXCI6XG5cdFx0XHRcdGlmKGlzRXNjYXBlZCB8fCBjb21tYW5kRXNjYXBlZCl7XG5cdFx0XHRcdFx0Y3VycmVudEFyZ3VtZW50ICs9IGNvbW1hbmRcblx0XHRcdFx0XHRpc0VzY2FwZWQgPSBmYWxzZVxuXHRcdFx0XHRcdGJyZWFrXG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Y29tbWFuZFN0YXJ0ZWQgPSB0cnVlXG5cdFx0XHRcdFx0Y3VycmVudENvbW1hbmQgKz0gY29tbWFuZFxuXHRcdFx0XHRcdGJyZWFrXG5cdFx0XHRcdH1cblx0XHRcdGNhc2UgXCJdXCI6XG5cdFx0XHRcdGlmKGlzRXNjYXBlZCB8fCBjb21tYW5kRXNjYXBlZCl7XG5cdFx0XHRcdFx0Y3VycmVudEFyZ3VtZW50ICs9IGNvbW1hbmRcblx0XHRcdFx0XHRpc0VzY2FwZWQgPSBmYWxzZVxuXHRcdFx0XHRcdGJyZWFrXG5cdFx0XHRcdH0gZWxzZSBpZiAoY29tbWFuZFN0YXJ0ZWQpIHtcblx0XHRcdFx0XHRjb21tYW5kU3RhcnRlZCA9IGZhbHNlXG5cdFx0XHRcdFx0Y3VycmVudENvbW1hbmQgKz0gY29tbWFuZFxuXHRcdFx0XHRcdHBhcnNlZENvbW1hbmRzLnB1c2goe1xuXHRcdFx0XHRcdFx0Y29tbWFuZDogTWFjcm9Db21tYW5kVHlwZS5QcmVzc0tleSxcblx0XHRcdFx0XHRcdGFyZ3VtZW50OiBjdXJyZW50QXJndW1lbnRcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRjdXJyZW50QXJndW1lbnQgPSBcIlwiXG5cdFx0XHRcdFx0YnJlYWtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRjdXJyZW50QXJndW1lbnQgKz0gY29tbWFuZFxuXHRcdFx0XHRcdGJyZWFrXG5cdFx0XHRcdH1cblx0XHRcdGNhc2UgXCIrXCI6XG5cdFx0XHRcdGlmIChpc0VzY2FwZWQgfHwgY29tbWFuZEVzY2FwZWQpe1xuXHRcdFx0XHRcdGN1cnJlbnRBcmd1bWVudCArPSBjb21tYW5kXG5cdFx0XHRcdFx0aXNFc2NhcGVkID0gZmFsc2Vcblx0XHRcdFx0XHRicmVha1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGNvbW1hbmRTdGFydGVkID0gZmFsc2Vcblx0XHRcdFx0XHRjdXJyZW50Q29tbWFuZCArPSBjb21tYW5kXG5cdFx0XHRcdFx0cGFyc2VkQ29tbWFuZHMucHVzaCh7XG5cdFx0XHRcdFx0XHRjb21tYW5kOiBNYWNyb0NvbW1hbmRUeXBlLlByZXNzS2V5cyxcblx0XHRcdFx0XHRcdGFyZ3VtZW50OiBcIlwiXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0Y3VycmVudEFyZ3VtZW50ID0gXCJcIlxuXHRcdFx0XHRcdGJyZWFrXG5cdFx0XHRcdH1cblx0XHRcdGNhc2UgXCJcXFwiXCI6XG5cdFx0XHRcdGlmIChpc0VzY2FwZWQpe1xuXHRcdFx0XHRcdGN1cnJlbnRBcmd1bWVudCArPSBjb21tYW5kXG5cdFx0XHRcdFx0aXNFc2NhcGVkID0gZmFsc2Vcblx0XHRcdFx0XHRicmVha1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGNvbW1hbmRFc2NhcGVkID0gdHJ1ZTtcblx0XHRcdFx0XHRjb21tYW5kU3RhcnRlZCA9ICFjb21tYW5kU3RhcnRlZFxuXHRcdFx0XHRcdGN1cnJlbnRDb21tYW5kICs9IGNvbW1hbmRcblx0XHRcdFx0XHRpZiAoIWNvbW1hbmRTdGFydGVkKSB7XG5cdFx0XHRcdFx0XHRwYXJzZWRDb21tYW5kcy5wdXNoKHtcblx0XHRcdFx0XHRcdFx0Y29tbWFuZDogTWFjcm9Db21tYW5kVHlwZS5BZGRUZXh0LFxuXHRcdFx0XHRcdFx0XHRhcmd1bWVudDogY3VycmVudEFyZ3VtZW50XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdGNvbW1hbmRFc2NhcGVkID0gZmFsc2U7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGN1cnJlbnRBcmd1bWVudCA9IFwiXCJcblx0XHRcdFx0XHRicmVha1xuXHRcdFx0XHR9XG5cdFx0XHRjYXNlIFwiI1wiOlxuXHRcdFx0XHRpZiAoaXNFc2NhcGVkIHx8IGNvbW1hbmRFc2NhcGVkKXtcblx0XHRcdFx0XHRjdXJyZW50QXJndW1lbnQgKz0gY29tbWFuZFxuXHRcdFx0XHRcdGlzRXNjYXBlZCA9IGZhbHNlXG5cdFx0XHRcdFx0YnJlYWtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRjb21tYW5kU3RhcnRlZCA9ICFjb21tYW5kU3RhcnRlZFxuXHRcdFx0XHRcdGN1cnJlbnRDb21tYW5kICs9IGNvbW1hbmRcblx0XHRcdFx0XHRpZiAoIWNvbW1hbmRTdGFydGVkKSB7XG5cdFx0XHRcdFx0XHRwYXJzZWRDb21tYW5kcy5wdXNoKHtcblx0XHRcdFx0XHRcdFx0Y29tbWFuZDogTWFjcm9Db21tYW5kVHlwZS5BZGRDb21tZW50LFxuXHRcdFx0XHRcdFx0XHRhcmd1bWVudDogY3VycmVudEFyZ3VtZW50XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Y3VycmVudEFyZ3VtZW50ID0gXCJcIlxuXHRcdFx0XHRcdGJyZWFrXG5cdFx0XHRcdH1cblx0XHRcdGNhc2UgXCJcXFxcXCI6XG5cdFx0XHRcdGlzRXNjYXBlZCA9IHRydWVcblx0XHRcdFx0YnJlYWtcblx0XHRcdGNhc2UgXCIsXCI6XG5cdFx0XHRcdGlmIChpc0VzY2FwZWQgfHwgY29tbWFuZEVzY2FwZWQpe1xuXHRcdFx0XHRcdGN1cnJlbnRBcmd1bWVudCArPSBjb21tYW5kXG5cdFx0XHRcdFx0aXNFc2NhcGVkID0gZmFsc2Vcblx0XHRcdFx0XHRicmVha1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGNvbW1hbmRTdGFydGVkID0gIWNvbW1hbmRTdGFydGVkXG5cdFx0XHRcdFx0Y3VycmVudENvbW1hbmQgKz0gY29tbWFuZFxuXHRcdFx0XHRcdGlmICghY29tbWFuZFN0YXJ0ZWQpIHtcblx0XHRcdFx0XHRcdHBhcnNlZENvbW1hbmRzLnB1c2goe1xuXHRcdFx0XHRcdFx0XHRjb21tYW5kOiBNYWNyb0NvbW1hbmRUeXBlLkRlbGF5LFxuXHRcdFx0XHRcdFx0XHRhcmd1bWVudDogY3VycmVudEFyZ3VtZW50XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Y3VycmVudEFyZ3VtZW50ID0gXCJcIlxuXHRcdFx0XHRcdGJyZWFrXG5cdFx0XHRcdH1cblx0XHRcdC8vcmVwZWF0IHRpbWVyIHN0YXJ0XG5cdFx0XHRjYXNlIFwie1wiOlxuXHRcdFx0XHRpZiAoaXNFc2NhcGVkIHx8IGNvbW1hbmRFc2NhcGVkKXtcblx0XHRcdFx0XHRjdXJyZW50QXJndW1lbnQgKz0gY29tbWFuZFxuXHRcdFx0XHRcdGlzRXNjYXBlZCA9IGZhbHNlXG5cdFx0XHRcdFx0YnJlYWtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRjb21tYW5kU3RhcnRlZCA9ICFjb21tYW5kU3RhcnRlZFxuXHRcdFx0XHRcdGN1cnJlbnRDb21tYW5kICs9IGNvbW1hbmRcblx0XHRcdFx0XHRicmVha1xuXHRcdFx0XHR9XG5cdFx0XHQvL3JlcGVhdCB0aW1lciBlbmRcblx0XHRcdGNhc2UgXCJ9XCI6XG5cdFx0XHRcdGlmIChpc0VzY2FwZWQgfHwgY29tbWFuZEVzY2FwZWQpe1xuXHRcdFx0XHRcdGN1cnJlbnRBcmd1bWVudCArPSBjb21tYW5kXG5cdFx0XHRcdFx0aXNFc2NhcGVkID0gZmFsc2Vcblx0XHRcdFx0XHRicmVha1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGNvbW1hbmRTdGFydGVkID0gZmFsc2Vcblx0XHRcdFx0XHRjdXJyZW50Q29tbWFuZCArPSBjb21tYW5kXG5cdFx0XHRcdFx0aWYgKCFjb21tYW5kU3RhcnRlZCkge1xuXHRcdFx0XHRcdFx0cGFyc2VkQ29tbWFuZHMucHVzaCh7XG5cdFx0XHRcdFx0XHRcdGNvbW1hbmQ6IE1hY3JvQ29tbWFuZFR5cGUuUmVwZWF0U3RhcnQsXG5cdFx0XHRcdFx0XHRcdGFyZ3VtZW50OiBjdXJyZW50QXJndW1lbnRcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRjdXJyZW50QXJndW1lbnQgPSBcIlwiXG5cdFx0XHRcdFx0YnJlYWtcblx0XHRcdFx0fVxuXHRcdFx0Y2FzZSBcIihcIjpcblx0XHRcdFx0aWYgKGlzRXNjYXBlZCB8fCBjb21tYW5kRXNjYXBlZCl7XG5cdFx0XHRcdFx0Y3VycmVudEFyZ3VtZW50ICs9IGNvbW1hbmRcblx0XHRcdFx0XHRpc0VzY2FwZWQgPSBmYWxzZVxuXHRcdFx0XHRcdGJyZWFrXG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Y3VycmVudENvbW1hbmQgKz0gY29tbWFuZFxuXHRcdFx0XHRcdGJyZWFrXG5cdFx0XHRcdH1cblx0XHRcdGNhc2UgXCIpXCI6XG5cdFx0XHRcdGlmIChpc0VzY2FwZWQgfHwgY29tbWFuZEVzY2FwZWQpe1xuXHRcdFx0XHRcdGN1cnJlbnRBcmd1bWVudCArPSBjb21tYW5kXG5cdFx0XHRcdFx0aXNFc2NhcGVkID0gZmFsc2Vcblx0XHRcdFx0XHRicmVha1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGN1cnJlbnRDb21tYW5kICs9IGNvbW1hbmRcblx0XHRcdFx0XHRpZiAoIWNvbW1hbmRTdGFydGVkKSB7XG5cdFx0XHRcdFx0XHRwYXJzZWRDb21tYW5kcy5wdXNoKHtcblx0XHRcdFx0XHRcdFx0Y29tbWFuZDogTWFjcm9Db21tYW5kVHlwZS5SZXBlYXRFbmQsXG5cdFx0XHRcdFx0XHRcdGFyZ3VtZW50OiBcIlwiXG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0YnJlYWtcblx0XHRcdFx0fVxuXHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0aWYgKGNvbW1hbmRTdGFydGVkKSB7XG5cdFx0XHRcdFx0Y3VycmVudEFyZ3VtZW50ICs9IGNvbW1hbmRcblx0XHRcdFx0fVxuXHRcdFx0XHRicmVha1xuXHRcdH1cblx0fSk7XG5cdHJldHVybiBwYXJzZWRDb21tYW5kc1xufVxuXG5cbmludGVyZmFjZSBNYWNyb0NvbW1hbmQge1xuXHRjb21tYW5kOiBNYWNyb0NvbW1hbmRUeXBlLFxuXHRhcmd1bWVudDogc3RyaW5nXG59XG5cbmVudW0gTWFjcm9Db21tYW5kVHlwZSB7XG5cdFByZXNzS2V5LFxuXHRQcmVzc0tleXMsXG5cdEFkZFRleHQsXG5cdEFkZENvbW1lbnQsXG5cdFJlcGVhdFN0YXJ0LFxuXHRSZXBlYXRFbmQsXG5cdERlbGF5XG59XG5cbiIsICJpbXBvcnQge09ic2lkaWFuVG91Y2hCYXJJdGVtLCBUb3VjaEJhckl0ZW1UeXBlfSBmcm9tIFwiLi4vdG91Y2hCYXJJdGVtc1wiO1xuaW1wb3J0IHtleGVjdXRlTWFjcm99IGZyb20gXCIuLi8uLi9tYWNyb1wiO1xuXG5jb25zdCB7VG91Y2hCYXJ9ID0gcmVxdWlyZSgnZWxlY3Ryb24nKS5yZW1vdGVcblxuLyoqXG4gKiBSZXByZXNlbnRzIGEgdG91Y2ggYmFyIGJ1dHRvblxuICovXG5leHBvcnQgY2xhc3MgT2JzaWRpYW5Ub3VjaEJhckJ1dHRvbiBleHRlbmRzIE9ic2lkaWFuVG91Y2hCYXJJdGVtIHtcblx0Y29uc3RydWN0b3IocHJvcGVydGllczogVG91Y2hCYXJCdXR0b25Qcm9wZXJ0aWVzKSB7XG5cdFx0c3VwZXIocHJvcGVydGllcyk7XG5cdFx0dGhpcy50eXBlID0gVG91Y2hCYXJJdGVtVHlwZS5PYnNpZGlhblRvdWNoQmFyQnV0dG9uO1xuXHR9XG5cblx0Z2V0SXRlbUZvckVsZWN0cm9uKCk6IGFueSB7XG5cdFx0cmV0dXJuIG5ldyBUb3VjaEJhci5Ub3VjaEJhckJ1dHRvbih7XG5cdFx0XHRsYWJlbDogdGhpcy5wcm9wZXJ0aWVzLmxhYmVsLFxuXHRcdFx0YmFja2dyb3VuZENvbG9yOiB0aGlzLnByb3BlcnRpZXMuYmFja2dyb3VuZENvbG9yLFxuXHRcdFx0Y2xpY2s6ICgpID0+IHtcblx0XHRcdFx0ZXhlY3V0ZU1hY3JvKHRoaXMuYXBwLCB0aGlzLnByb3BlcnRpZXMubWFjcm8pXG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuXHRnZXRJdGVtRm9yRGlzcGxheSgpOiBIVE1MRWxlbWVudCB7XG5cdFx0Y29uc3QgaXRlbUVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblx0XHRpdGVtRWwuY2xhc3NMaXN0LmFkZCgndG91Y2hiYXItaXRlbS1saXN0Jylcblx0XHQvL2NyZWF0ZSB0aGUgaW5wdXQgZmllbGRzXG5cdFx0Y29uc3QgbGFiZWxJbiA9IGl0ZW1FbC5jcmVhdGVFbChcImlucHV0XCIsIHtcblx0XHRcdHR5cGU6IFwidGV4dFwiLFxuXHRcdFx0dmFsdWU6IHRoaXMucHJvcGVydGllcy5sYWJlbCxcblx0XHR9KTtcblx0XHRsYWJlbEluLmNsYXNzTGlzdC5hZGQoJ3RvdWNoYmFyLWl0ZW0taW5wdXQnKVxuXHRcdGxhYmVsSW4ucGxhY2Vob2xkZXIgPSAnTGFiZWwnXG5cblx0XHRjb25zdCBjb2xvckluID0gaXRlbUVsLmNyZWF0ZUVsKFwiaW5wdXRcIiwge1xuXHRcdFx0dHlwZTogXCJjb2xvclwiLFxuXHRcdFx0dmFsdWU6IHRoaXMucHJvcGVydGllcy5iYWNrZ3JvdW5kQ29sb3IsXG5cdFx0fSk7XG5cdFx0Y29sb3JJbi5jbGFzc0xpc3QuYWRkKCd0b3VjaGJhci1pdGVtLWlucHV0Jylcblx0XHRjb2xvckluLnBsYWNlaG9sZGVyID0gJ0JhY2tncm91bmQgQ29sb3InXG5cblx0XHRjb25zdCBtYWtyb0luID0gaXRlbUVsLmNyZWF0ZUVsKFwiaW5wdXRcIiwge1xuXHRcdFx0dHlwZTogXCJ0ZXh0XCIsXG5cdFx0XHR2YWx1ZTogdGhpcy5wcm9wZXJ0aWVzLm1hY3JvLFxuXHRcdH0pO1xuXHRcdG1ha3JvSW4uY2xhc3NMaXN0LmFkZCgndG91Y2hiYXItaXRlbS1pbnB1dCcpXG5cdFx0bWFrcm9Jbi5jbGFzc0xpc3QuYWRkKFwid2lkZS1pbnB1dFwiKVxuXHRcdG1ha3JvSW4ucGxhY2Vob2xkZXIgPSAnTWFjcm8nXG5cblxuXHRcdGxhYmVsSW4ub25jaGFuZ2UgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHR0aGlzLnByb3BlcnRpZXMubGFiZWwgPSBsYWJlbEluLnZhbHVlXG5cdFx0fVxuXG5cdFx0Y29sb3JJbi5vbmNoYW5nZSA9IGFzeW5jICgpID0+IHtcblx0XHRcdHRoaXMucHJvcGVydGllcy5iYWNrZ3JvdW5kQ29sb3IgPSBjb2xvckluLnZhbHVlXG5cdFx0fVxuXG5cdFx0bWFrcm9Jbi5vbmNoYW5nZSA9IGFzeW5jICgpID0+IHtcblx0XHRcdHRoaXMucHJvcGVydGllcy5tYWNybyA9IG1ha3JvSW4udmFsdWVcblx0XHR9XG5cdFx0cmV0dXJuIGl0ZW1FbFxuXHR9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVG91Y2hCYXJCdXR0b25Qcm9wZXJ0aWVzIHtcblx0bGFiZWw6IHN0cmluZ1xuXHRiYWNrZ3JvdW5kQ29sb3I6IHN0cmluZ1xuXHRtYWNybzogc3RyaW5nXG59XG5cblxuIiwgImltcG9ydCB7T2JzaWRpYW5Ub3VjaEJhckl0ZW0sIFRvdWNoQmFySXRlbVR5cGV9IGZyb20gXCIuLi90b3VjaEJhckl0ZW1zXCI7XG5jb25zdCB7VG91Y2hCYXJ9ID0gcmVxdWlyZSgnZWxlY3Ryb24nKS5yZW1vdGVcblxuXG5leHBvcnQgY2xhc3MgT2JzaWRpYW5Ub3VjaEJhckxhYmVsIGV4dGVuZHMgT2JzaWRpYW5Ub3VjaEJhckl0ZW0ge1xuXHRjb25zdHJ1Y3Rvcihwcm9wZXJ0aWVzOiBUb3VjaEJhckxhYmVsUHJvcGVydGllcykge1xuXHRcdHN1cGVyKHByb3BlcnRpZXMpO1xuXHRcdHRoaXMudHlwZSA9IFRvdWNoQmFySXRlbVR5cGUuT2JzaWRpYW5Ub3VjaEJhckxhYmVsO1xuXHR9XG5cblx0Z2V0SXRlbUZvckVsZWN0cm9uKCk6IGFueSB7XG5cdFx0cmV0dXJuIG5ldyBUb3VjaEJhci5Ub3VjaEJhckxhYmVsKHtcblx0XHRcdGxhYmVsOiB0aGlzLnByb3BlcnRpZXMubGFiZWwsXG5cdFx0fSlcblx0fVxuXG5cdGdldEl0ZW1Gb3JEaXNwbGF5KCk6IEhUTUxFbGVtZW50IHtcblx0XHRjb25zdCBpdGVtRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXHRcdGl0ZW1FbC5jbGFzc0xpc3QuYWRkKCd0b3VjaGJhci1pdGVtLWxpc3QnKVxuXHRcdGNvbnN0IGxhYmVsSW4gPSBpdGVtRWwuY3JlYXRlRWwoXCJpbnB1dFwiLCB7XG5cdFx0XHR0eXBlOiBcInRleHRcIixcblx0XHRcdHZhbHVlOiB0aGlzLnByb3BlcnRpZXMubGFiZWwsXG5cdFx0fSk7XG5cdFx0bGFiZWxJbi5jbGFzc0xpc3QuYWRkKFwid2lkZS1pbnB1dFwiKVxuXHRcdGxhYmVsSW4uY2xhc3NMaXN0LmFkZCgndG91Y2hiYXItaXRlbS1pbnB1dCcpXG5cdFx0bGFiZWxJbi5wbGFjZWhvbGRlciA9ICdMYWJlbCdcblxuXHRcdGxhYmVsSW4ub25jaGFuZ2UgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHR0aGlzLnByb3BlcnRpZXMubGFiZWwgPSBsYWJlbEluLnZhbHVlXG5cdFx0fVxuXG5cdFx0cmV0dXJuIGl0ZW1FbDtcblx0fVxuXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVG91Y2hCYXJMYWJlbFByb3BlcnRpZXMge1xuXHRsYWJlbDogc3RyaW5nXG59XG4iLCAiaW1wb3J0IHtTZXJpYWxpemVkVG91Y2hCYXJJdGVtLCBUb3VjaEJhckl0ZW1UeXBlfSBmcm9tIFwiLi90b3VjaEJhckl0ZW1zXCI7XG5pbXBvcnQge09ic2lkaWFuVG91Y2hCYXJCdXR0b259IGZyb20gXCIuL2l0ZW1zL2J1dHRvblwiO1xuaW1wb3J0IHtPYnNpZGlhblRvdWNoQmFyTGFiZWx9IGZyb20gXCIuL2l0ZW1zL2xhYmVsXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBkZXNlcmlhbGl6ZVRvdWNoQmFySXRlbShzZXJpYWxpemVkSXRlbTogU2VyaWFsaXplZFRvdWNoQmFySXRlbSkge1xuXHRzd2l0Y2ggKHNlcmlhbGl6ZWRJdGVtLnR5cGUpIHtcblx0XHRjYXNlIFRvdWNoQmFySXRlbVR5cGUuT2JzaWRpYW5Ub3VjaEJhckJ1dHRvbjpcblx0XHRcdHJldHVybiBuZXcgT2JzaWRpYW5Ub3VjaEJhckJ1dHRvbihzZXJpYWxpemVkSXRlbS5wcm9wZXJ0aWVzKTtcblx0XHRjYXNlIFRvdWNoQmFySXRlbVR5cGUuT2JzaWRpYW5Ub3VjaEJhckxhYmVsOlxuXHRcdFx0cmV0dXJuIG5ldyBPYnNpZGlhblRvdWNoQmFyTGFiZWwoc2VyaWFsaXplZEl0ZW0ucHJvcGVydGllcyk7XG5cdFx0Y2FzZSBUb3VjaEJhckl0ZW1UeXBlLk9ic2lkaWFuVG91Y2hCYXJDb2xvclBpY2tlcjpcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIlVua25vd24gdG91Y2ggYmFyIGl0ZW0gdHlwZTogXCIgKyBzZXJpYWxpemVkSXRlbS50eXBlKTtcblx0XHRjYXNlIFRvdWNoQmFySXRlbVR5cGUuT2JzaWRpYW5Ub3VjaEJhckdyb3VwOlxuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiVW5rbm93biB0b3VjaCBiYXIgaXRlbSB0eXBlOiBcIiArIHNlcmlhbGl6ZWRJdGVtLnR5cGUpO1xuXHRcdGNhc2UgVG91Y2hCYXJJdGVtVHlwZS5PYnNpZGlhblRvdWNoQmFyUG9wb3Zlcjpcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIlVua25vd24gdG91Y2ggYmFyIGl0ZW0gdHlwZTogXCIgKyBzZXJpYWxpemVkSXRlbS50eXBlKTtcblx0XHRjYXNlIFRvdWNoQmFySXRlbVR5cGUuT2JzaWRpYW5Ub3VjaEJhclNjcnViYmVyOlxuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiVW5rbm93biB0b3VjaCBiYXIgaXRlbSB0eXBlOiBcIiArIHNlcmlhbGl6ZWRJdGVtLnR5cGUpO1xuXHRcdGNhc2UgVG91Y2hCYXJJdGVtVHlwZS5PYnNpZGlhblRvdWNoQmFyU2VnbWVudGVkQ29udHJvbDpcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIlVua25vd24gdG91Y2ggYmFyIGl0ZW0gdHlwZTogXCIgKyBzZXJpYWxpemVkSXRlbS50eXBlKTtcblx0XHRjYXNlIFRvdWNoQmFySXRlbVR5cGUuT2JzaWRpYW5Ub3VjaEJhclNsaWRlcjpcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIlVua25vd24gdG91Y2ggYmFyIGl0ZW0gdHlwZTogXCIgKyBzZXJpYWxpemVkSXRlbS50eXBlKTtcblx0XHRjYXNlIFRvdWNoQmFySXRlbVR5cGUuT2JzaWRpYW5Ub3VjaEJhclNwYWNlcjpcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIlVua25vd24gdG91Y2ggYmFyIGl0ZW0gdHlwZTogXCIgKyBzZXJpYWxpemVkSXRlbS50eXBlKTtcblx0XHRkZWZhdWx0OlxuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiVW5rbm93biB0b3VjaCBiYXIgaXRlbSB0eXBlOiBcIiArIHNlcmlhbGl6ZWRJdGVtLnR5cGUpO1xuXHR9XG59XG4iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBLGlDQUFBQSxTQUFBO0FBQUEsSUFBQUEsUUFBQTtB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QkFBeUIsQ0FBQztBQUU5RCxVQUFNLGdCQUFnQixLQUFLLE9BQU8sU0FBUztBQUUzQyxZQUFRLElBQUksYUFBYTtBQUN6QixhQUFTLElBQUksR0FBRyxJQUFJLGNBQWMsUUFBUSxLQUFLO0FBQzlDLHlCQUFtQix3QkFBd0IsY0FBYyxDQUFDLENBQUMsQ0FBQztBQUFBLElBQzdEO0FBSUEsZ0JBQVksU0FBUyxJQUFJO0FBR3pCLGdCQUFZLFNBQVMsTUFBTSxFQUFDLE1BQU0sU0FBUSxDQUFDO0FBQzNDLFVBQU0sY0FBYyxZQUFZLFNBQVMsS0FBSyxFQUFDLE1BQU0sb05BQW1OLENBQUM7QUFDelEsZ0JBQVksVUFBVSxJQUFJLCtCQUErQjtBQUN6RCxnQkFBWSxTQUFTLEtBQUs7QUFBQSxNQUN6QixNQUFNO0FBQUEsTUFDTixNQUFNO0FBQUEsSUFDUCxDQUFDO0FBRUQsVUFBTSxhQUFhLFlBQVksU0FBUyxTQUFTLHNCQUFzQjtBQUN2RSxVQUFNLGlCQUFpQixXQUFXLFNBQVMsT0FBTztBQUNsRCxVQUFNLG9CQUFvQixlQUFlLFNBQVMsSUFBSTtBQUN0RCxVQUFNLHdCQUF3QixrQkFBa0IsU0FBUyxJQUFJO0FBQzdELFVBQU0seUJBQXlCLGtCQUFrQixTQUFTLElBQUk7QUFDOUQsVUFBTSx5QkFBeUIsa0JBQWtCLFNBQVMsSUFBSTtBQUM5RCwwQkFBc0IsUUFBUSxRQUFRO0FBQ3RDLDJCQUF1QixRQUFRLGFBQWE7QUFDNUMsMkJBQXVCLFFBQVEsU0FBUztBQUN4QyxVQUFNLGlCQUFpQixXQUFXLFNBQVMsT0FBTztBQUlsRCxVQUFNLEVBQUUsT0FBTyxJQUFJO0FBR25CLGFBQVMsSUFBSSxHQUFHLElBQUksT0FBTyxRQUFRLEtBQUs7QUFDdkMsWUFBTSxNQUFNLGVBQWUsU0FBUyxJQUFJO0FBQ3hDLFlBQU0sT0FBTyxJQUFJLFNBQVMsTUFBTSw2QkFBNkI7QUFDN0QsWUFBTSxPQUFPLElBQUksU0FBUyxNQUFNLDZCQUE2QjtBQUM3RCxZQUFNLFVBQVUsSUFBSSxTQUFTLE1BQU0sNkJBQTZCO0FBQ2hFLFdBQUssUUFBUSxPQUFPLENBQUMsRUFBRSxRQUFRLENBQUM7QUFDaEMsV0FBSyxRQUFRLE9BQU8sQ0FBQyxFQUFFLGFBQWEsQ0FBQztBQUNyQyxjQUFRLFFBQVEsT0FBTyxDQUFDLEVBQUUsU0FBUyxDQUFDO0FBQUEsSUFDckM7QUFBQSxFQUVEO0FBRUQ7IiwKICAibmFtZXMiOiBbIm1vZHVsZSIsICJjb21tYW5kIiwgIk1hY3JvQ29tbWFuZFR5cGUiLCAiVG91Y2hCYXIiLCAiVG91Y2hCYXIiLCAiYnV0dG9uIl0KfQo=
